<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mood Booster ‚Äî Dev</title>
<style>
:root{
  --pink:#ff69b4;
  --hotpink:#ff1493;
  --bg:#ffe4e1;
  --card-bg:#ffffff;
  --muted:#f0f0f0;
  --text:#111;
}
[data-theme="dark"]{
  --bg:#1b1220;
  --card-bg:#241726;
  --muted:#2b1c2a;
  --pink:#ff9acb;
  --hotpink:#ff6ea6;
  --text:#f6eef6;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Poppins,Arial;
  display:flex;
  justify-content:center;
  padding:40px 0;
}

.container{
  background:var(--card-bg);
  width:900px;
  max-width:95%;
  padding:25px;
  border-radius:18px;
  box-shadow:0 8px 24px rgba(0,0,0,.08);
  display:flex;
  gap:25px;
}

.left{width:65%}
.right{width:35%}

.avatar-wrap{
  width:150px;height:150px;border-radius:50%;
  padding:6px;border:6px solid var(--pink);
  display:flex;align-items:center;justify-content:center;
  margin:auto;
}
#pet-display{width:130px;height:130px;border-radius:50%;object-fit:cover}

.meter{width:100%;background:var(--muted);border-radius:12px;padding:4px;margin-top:12px}
.progress{
  height:24px;width:50%;
  background:linear-gradient(90deg,var(--hotpink),var(--pink));
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:700;
  transition:width .45s;
}

.buttons{display:flex;gap:10px;justify-content:center;margin-top:10px}
.buttons button{
  padding:8px 14px;border:none;border-radius:10px;
  background:var(--pink);color:white;
  font-weight:700;cursor:pointer;
}

#status-message{text-align:center;color:var(--pink);margin-top:10px;font-weight:600}
#last-interaction{text-align:center;font-size:12px;margin-top:4px;color:#555}

.dev-panel{
  padding:12px;background:rgba(0,0,0,0.03);
  border-radius:10px;
}
.dev-panel button{
  width:100%;padding:8px;margin-top:6px;
  border:none;border-radius:8px;cursor:pointer;font-weight:600;
}
#log{
  height:180px;background:#fff7fb;
  border:1px solid #ffcce7;
  border-radius:8px;padding:6px;
  overflow:auto;white-space:pre-line;
  font-size:12px;color:#5c1b3a;
}
#themeToggle{
  position:fixed;right:12px;top:12px;
  padding:8px 10px;border-radius:10px;
  background:transparent;border:2px solid rgba(255,255,255,0.12);
  cursor:pointer;
}
</style>
</head>
<body>

<button id="themeToggle">üåô</button>

<div class="container">
  <div class="left">
    <h2 style="margin:0 0 10px">DEV ‚Äî Mood Booster</h2>

    <div class="avatar-wrap">
      <img id="pet-display" src="ratna_normal.png"/>
    </div>

    <div class="meter"><div id="health-bar" class="progress">Kesihatan</div></div>
    <div id="status-message">Hai Anep!</div>
    <div id="last-interaction">Last: -</div>

    <div class="buttons">
      <button onclick="feedPet()">Beri Makan üçî</button>
      <button onclick="petPet()">Pujuk ü§ó</button>
      <button onclick="sendKiss()">Send Kiss üòò</button>
    </div>
  </div>

  <div class="right">
    <div class="dev-panel">
      <b>Logs (BF actions ‚Äî LIVE)</b>
      <div id="log">(tiada data)</div>
    </div>
  </div>
</div>

<script>
// Basic pet logic (same as stable, no Firebase)
let health = 100;
const petDisplay = document.getElementById("pet-display");
const statusMessage = document.getElementById("status-message");
const healthBar = document.getElementById("health-bar");

function changeImage(src){ petDisplay.src = src; }

function feedPet(){ health=Math.min(100,health+15); updatePet("Yummy!"); changeImage("ratna_makan.png"); }
function petPet(){ health=Math.min(100,health+10); updatePet("Heheh ü•∞"); changeImage("ratna_gembira.png"); }
function sendKiss(){ health=Math.min(100,health+5); updatePet("Muahh üíñ"); changeImage("ratna_kiss.png"); }

function updatePet(msg){
  statusMessage.textContent = msg;
  healthBar.style.width = `${health}%`;
  healthBar.textContent = `${health}% Mood Titew`;
}
setInterval(()=>{
  health=Math.max(0,health-2);
  updatePet("Nak attention pwiss ü•∫");
  changeImage("ratna_normal.png");
},3000);

updatePet("Hai Anep!");
changeImage("ratna_normal.png");
</script>

<!-- Firebase - BACA LOG BF -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDH0xKiNZ_f2opGL18pbZ-7xLt9pTS-9k8",
  authDomain: "anep-s-booster.firebaseapp.com",
  projectId: "anep-s-booster",
  storageBucket: "anep-s-booster.firebasestorage.app",
  messagingSenderId: "349506408528",
  appId: "1:349506408528:web:a049a1097c55595212c155",
  databaseURL: "https://anep-s-booster-default-rtdb.asia-southeast1.firebasedatabase.app/"
};

const BF_ID = "dev-yp3q3582mit2fgp0";   // üîí LOCK DEVICE BF

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const logBox = document.getElementById("log");
const node = ref(db, "logs/" + BF_ID);

onValue(node, (snap)=>{
   const data = snap.val();
   if (!data){
      logBox.textContent = "(BF belum tekan apa-apa)";
      return;
   }

   let out = "";
   Object.values(data)
     .sort((a,b)=>b.ts - a.ts)
     .forEach(item=>{
       const time = new Date(item.ts).toLocaleTimeString();
       out += `${time} ‚Äî ${item.action}\n`;
     });

   logBox.textContent = out || "(tiada aksi)";
});
</script>

<script>
// Theme toggle
document.getElementById("themeToggle").onclick = ()=>{
  const isDark = document.documentElement.getAttribute("data-theme")==="dark";
  document.documentElement.setAttribute("data-theme", isDark ? "light":"dark");
};
</script>

</body>
</html>
